<!DOCTYPE html>
<html>

<head>
  <title>Display IP Address</title>
</head>

<body>

  <script>
	  var xhrService = {
		  url: 'http://localhost:3000/cards',
		  methods: {'get': 'GET', 'post': 'POST', 'patch': 'PATCH', 'delete': 'DELETE'},
		  result: [],
		  makeXHR: function(method, cardData) {
			  let xhr = new XMLHttpRequest();
			  let data = JSON.stringify(cardData);
			  switch(method) {
				  case this.methods.get:
					  xhr.open(method, this.url, true);
					  xhr.responseType = 'json';
					  xhr.error = function() {
				          console.log(xhr.status);
		  				  console.log('GET request was not successful');
					  };
					  xhr.onload = function() {
						  this.result = xhr.response;
						  document.querySelector('body').innerHTML = this.result[0].title;
					  };
					  xhr.send();
					  break;
				  case this.methods.post:
	  				  xhr.open(method, this.url, true);
					  xhr.responseType = 'json';
					  xhr.setRequestHeader('Content-Type', 'application/json');
					  xhr.error = function() {
						  console.log(xhr.status);
		  				  console.log('POST request was not successful');
					  };
					  xhr.onload = function() {
						  this.result = xhr.response;
						  console.log(this.result);
						  //document.querySelector('body').innerHTML = this.result[0].title;
					  };
					  xhr.send(data);
					  break;
				  case this.methods.patch:
	  				  xhr.open(method, this.url + '/' + cardData.id, true);
					  xhr.responseType = 'json';
					  xhr.setRequestHeader('Content-Type', 'application/json');
					  xhr.error = function() {
						  console.log(xhr.status);
		  				  console.log('Patch request was not successful');
					  };
					  xhr.onload = function() {
						  this.result = xhr.response;
						  console.log(this.result);
						  //document.querySelector('body').innerHTML = this.result[0].title;
					  };
					  xhr.send(data);
					  break;
				   case this.methods.delete:
	  				  xhr.open(method, this.url + '/' + cardData.id, true);
					  xhr.error = function() {
						  console.log(xhr.status);
		  				  console.log('Delete request was not successful');
					  };
					  xhr.send();
					  break;
			  }
		  }
	  }
  </script>
</body>

</html>
